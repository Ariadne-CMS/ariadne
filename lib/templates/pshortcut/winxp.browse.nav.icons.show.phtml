<?php
	/******************************************************************
	 browse.nav.list.show.phtml                            Muze Ariadne
	 ------------------------------------------------------------------
	 Arguments: none
	 Grant needed: none
	 Global variables: none

	 This template displays the icon and name of an object. If the 
	 user doesn't have read access to the object, the name is displayed
	 in grey.
	 
	 no result

	******************************************************************/

	if (!$arLanguage) {
		$arLanguage=$nls;
	}
	if ($data->$arLanguage) {
		$nlsdata=$data->$arLanguage;
	}

	$permcheck = array();
	$permcheck[] = "edit";
	$permcheck[] = "config";
	$permcheck[] = "delete";
	$permcheck[] = "layout";
	
	$disabledItems="";
	if(!$this->AR_implements("pshortcut") || !$this->CheckSilent("edit"))
		$disabledItems.= "normalCMshortcut;";
	if(!$this->CheckSilent("edit"))
		$disabledItems.= "normalCMedit;";
	if(!$this->CheckSilent("delete"))
		$disabledItems.= "normalCMdelete;normalCMrename;";
	if(!$this->CheckSilent("read"))
		$disabledItems.= "normalCMexplore;normalCMviewweb;normalCMcopy;normalCMlink;";
	$icon=$this->call("system.get.icon.phtml");
?>

<div class="object" align="center"><nobr><a contextmenu="normalContextMenu" disableditems="<?php echo $disabledItems; ?>"
	href="#" class="unselectedItem" onClick="selectItem(this);" onDblClick="top.View(this.getAttribute('path'))" path="<?php echo $this->path; ?>" fullPath="<?php echo $this->make_url($this->path); ?>"><img 
	width="40" height="40" src="<?php echo $icon; ?>" 
	alt="<?php echo $this->path; ?>" border="0"><br /><?php
		if (strlen($nlsdata->name)>32) {
			$name=substr($nlsdata->name,0, 32)."...";
		} else {
			$name=$nlsdata->name;
		}
		if (!$this->CheckSilent("read")) {
			echo "<font color=\"#CCCCCC\">$name</font>";
		} else {
			echo "$name";
		}
	?></a></nobr></div>
