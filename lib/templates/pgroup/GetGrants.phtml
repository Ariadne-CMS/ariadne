<?php
  if (($data->usergrants) && is_array($data->usergrants)) {
    $newpath=$path;
    while (!$found && ($newpath!=$oldpath)) {
      $oldpath=$newpath;
      if ($data->usergrants[$oldpath]) {
          $found=true;
      } else {
        $newpath=$this->store->make_path($oldpath, "..");
      }
    }
    if ($oldpath) {
      $arResult=$data->usergrants[$oldpath];
    }
  }
?>