<?php
	/******************************************************************
	 view.html                                             Muze Ariadne
	 ------------------------------------------------------------------
	 Arguments: none
	 Grant needed: read
	 Global variables: none

	 This displays a suitable overview of the object.

	 no result.
 
	******************************************************************/
	if ($this->CheckLogin("read") && $this->CheckConfig($arCallFunction, $arCallArgs) ) {
?>
<table border="0" width="100%" bgcolor="#404074" cellspacing="0">
<tr>
	<td align="left">
	<font face="helvetica, sans-serif" size="3" color="white">
	<b><?php echo $nlsdata->name; ?>.</b></font>
	</td><td align="right">
	<input type="hidden" name="arNewFilename" value="{4:id}">
	</td>

</tr>
</table>
<p>
<form name="search">
<center>
<table border="0">
<tr>
	<td align="right">
		<select name="search_property">
        <?php
          $list=Array(
            "name" 		=> $ARnls["name"],
            "street" 	=> $ARnls["address"],
            "zipcode"	=> $ARnls["zipcode"],
            "city"		=> $ARnls["city"],
            "country"	=> $ARnls["country"] );
          while (list($key, $value)=each($list)) {
            echo "<option value=\"$key\"";
            if ($key==$search_property) {
              echo " selected";
            }
            echo ">$value</option>\n";
          }
        ?>
		</select>
	</td><td align="center">
		<input type="text" name="search_value" value="<?php echo $search_value; ?>">
	</td><td align="left">
		<input type="submit" name="do_search" value="<?php echo $ARnls["search"]; ?>">
	</td>
</tr>
</form>
<tr>
<td colspan="3" align="center">
<a href="?orderby=a">A</a>&nbsp;&nbsp;
<a href="?orderby=b">B</a>&nbsp;&nbsp;
<a href="?orderby=c">C</a>&nbsp;&nbsp;
<a href="?orderby=d">D</a>&nbsp;&nbsp;
<a href="?orderby=e">E</a>&nbsp;&nbsp;
<a href="?orderby=f">F</a>&nbsp;&nbsp;
<a href="?orderby=g">G</a>&nbsp;&nbsp;
<a href="?orderby=h">H</a>&nbsp;&nbsp;
<a href="?orderby=i">I</a>&nbsp;&nbsp;
<a href="?orderby=j">J</a>&nbsp;&nbsp;
<a href="?orderby=k">K</a>&nbsp;&nbsp;
<a href="?orderby=l">L</a>&nbsp;&nbsp;
<a href="?orderby=m">M</a>&nbsp;&nbsp;
<a href="?orderby=n">N</a>&nbsp;&nbsp;
<a href="?orderby=o">O</a>&nbsp;&nbsp;
<a href="?orderby=p">P</a>&nbsp;&nbsp;
<a href="?orderby=q">Q</a>&nbsp;&nbsp;
<a href="?orderby=r">R</a>&nbsp;&nbsp;
<a href="?orderby=s">S</a>&nbsp;&nbsp;
<a href="?orderby=t">T</a>&nbsp;&nbsp;
<a href="?orderby=u">U</a>&nbsp;&nbsp;
<a href="?orderby=v">V</a>&nbsp;&nbsp;
<a href="?orderby=w">W</a>&nbsp;&nbsp;
<a href="?orderby=x">X</a>&nbsp;&nbsp;
<a href="?orderby=y">Y</a>&nbsp;&nbsp;
<a href="?orderby=z">Z</a>&nbsp;&nbsp;
</td>
</tr></table>
</center>
<P>
<table border="0" width="100%">
<tr valign="top">
	<td>
<?php
	$criteria["object"]["implements"]["="]="'address'";
	if (!$search_property) {
		if (!$orderby) $orderby="a";
		$criteria["name"]["value"]["LIKE"]="'".AddSlashes($orderby)."%'";
	} else {
		switch($search_property) {
			case 'name':
				$criteria["name"]["value"]["LIKE"]="'%".AddSlashes($search_value)."%'";
				break;
			default:
				$criteria["address"][AddSlashes($search_property)]["LIKE"]="'%".AddSlashes($search_value)."%'";
				break;
		}
	}
	$addresses=$this->get_addresses($criteria,"name");
	while (is_array($addresses) && (list($key,$address)=each($addresses))) {	
		$address->call("show.card.phtml");
	}

?>
	</td>
</tr>
</table>
</body>
</html>
<?php
	}
?>