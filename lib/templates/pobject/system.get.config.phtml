<?php
	if (!$ARConfig->cache[$this->parent] && $this->parent!="..") {
		$this->get($this->parent, "system.get.config.phtml");
	}

	$this->call('system.get.config.data.phtml', $arCallArgs);
	/* load pinp configuration data via config.ini */
	$nolangcheck = $ARCurrent->nolangcheck;	
	$ARCurrent->nolangcheck = true;
	
	$ARConfig->pinpcache[$this->path] = $ARConfig->pinpcache[$this->parent];
	$ARCurrent->arConfig = &$ARConfig->pinpcache[$this->path];

	/* calling config.ini directly for each system.get.config.phtml call */
	// clear unnamed libraries in the library section of arConfig
	// prevents strange behaviour when overriding library templates
	if (is_array($ARCurrent->arConfig['library'])) {
		foreach ($ARCurrent->arConfig['library'] as $key => $value) {
			if (is_int($key)) {
				unset($ARCurrent->arConfig['library'][$key]);
			}
		}
	}
	if (!$this->CheckConfig('config.ini', $arCallArgs)) {
		if (is_array($ARCurrent->arConfig['library'])) {
			if (!$ARConfig->libraries[$this->path]) {
				$ARConfig->libraries[$this->path] = Array();
			}
			foreach ($ARCurrent->arConfig['library'] as $libName => $libPath) {
				$this->loadLibrary($libName, $libPath);
			}
		}
	}
	// remove pinpcache reference
	unset($ARCurrent->arConfig);
	$ARCurrent->nolangcheck = $nolangcheck;

?>