<?php
    /******************************************************************
     manage.info.html                                      Muze Ariadne
     ------------------------------------------------------------------
     Author: Muze (info@muze.nl)
     Date: 11 december 2002

     Copyright 2002 Muze

     This file is part of Ariadne.

     Ariadne is free software; you can redistribute it and/or modify
     it under the terms of the GNU General Public License as published 
     by the Free Software Foundation; either version 2 of the License, 
     or (at your option) any later version.
 
     Ariadne is distributed in the hope that it will be useful,
     but WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     GNU General Public License for more details.

     You should have received a copy of the GNU General Public License
     along with Ariadne; if not, write to the Free Software 
     Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  
     02111-1307  USA

    -------------------------------------------------------------------

     Description:

	Shows the infobox at the top right of the 'new' management
        interface.

    ******************************************************************/

	if ($this->CheckLogin("read") && $this->CheckConfig($arCallFunction, $arCallArgs)) {
?>
	<div id="infobox">
		<table width="100%">
			<tr><td valign="top"><?php echo $ARnls["type"]; ?>:</td>
				<td valign="top" class="data"><?php echo $this->type; ?></td></tr>
			<tr><td valign="top"><?php echo $ARnls["user"]; ?>:</td>
				<td valign="top" class="data"><a href="javascript:arshow('edit_object_owner','edit.config.owner.phtml')" title="<?php echo $ARnls['change_owner']; ?>"><?php 
					echo $this->data->config->owner_name; ?></a></td></tr>
			<tr><td valign="top"><?php echo $ARnls["date"]; ?>:</td>
				<td valign="top" class="data"><?php echo strftime("%m-%d-%Y",$this->data->ctime); ?></td></tr>
			<tr><td valign="top"><?php echo $ARnls["modified"]; ?>:</td>
				<td valign="top" class="data"><?php echo strftime("%m-%d-%Y",$this->data->mtime); ?></td></tr>
			<tr><td valign="top"><?php echo $ARnls["size"]; ?>:</td>
				<td valign="top" class="data"><?php echo $this->make_filesize(); ?></td></tr>
			<tr><td valign="top"><?php echo $ARnls["priority"]; ?>:</td>
				<td valign="top" class="data"><?php 
					echo "<a href=\"javascript:arshow('edit_priority','edit.priority.phtml')\" title=\"".$ARnls['priority']." \">".$this->priority."</a>";
				?></span></td></tr>
			<?php
				if (is_array($data->nls->list)) {
			?>
			<tr><td valign="top"><?php echo $ARnls["language"]; ?>:</td><td valign="middle" class="data"><?php 
					reset($data->nls->list);
					while (list($key, $nls)=each($data->nls->list)) {
						if ($arLanguage==$key) {
							$class="selected";
						} else {
							$class="unselected";
						}
						echo "<a class='$class' href='".ldGetServerVar("PHP_SELF")."?".ldGetServerVar("QUERY_STRING")."&arLanguage=$key' onClick=\"top.Set('arLanguage','$key'); return true;\"><img src=\"".$AR->dir->images."nls/small/".$key.".gif\" border=\"0\" alt=\"".$AR->nls->list[$key]."\"></a> ";
					}
				?></td></tr>
			<?php
				}
			?>
			<tr><td valign="top"><?php echo $ARnls["details"]; ?>:</td><td valign="top" class="data"><?php 
				if (count($data->config->pinp)) { 
					echo "<a href=\"javascript:arshow('edit_object_layout','edit.object.layout.phtml')\" title=\"".$ARnls['template']."\">T</a>&nbsp;"; 
				}; 
				if (count($data->config->grants)) { 
					echo "<a href=\"javascript:arshow('edit_object_grants','edit.object.grants.phtml')\" title=\"".$ARnls['grants']."\">G</a>&nbsp;"; 
				}; 
				?>
				</span></td></tr>
			<?php
				if ($AR->SVN->enabled) {
					$fstore = $this->store->get_filestore_svn("templates");
					$svnstack = &PEAR_ErrorStack::singleton('VersionControl_SVN');
                			$svn    = $fstore->connect($this->id);
                			$svn_revision = $svn['info']['Revision'];
					if ($svn_revision) {
			?>
			<tr><td valign="top"><?php echo $ARnls['svn_revision']; ?>:</td><td valign="top" class="data"><?php echo $svn_revision; ?></td></tr>

			<?php
					} else {
			?>
			<tr><td valign="top"><?php echo $ARnls['svn_revision']; ?>:</td><td valign="top" class="data"><?php echo $ARnls['svn_notworkingcopy']; ?></td></tr>
			<?php
					}
				}
			?>

		</table>
	</div>
<?php
	}
?>