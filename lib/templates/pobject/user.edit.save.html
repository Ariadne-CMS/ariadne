<?php
	if ($this->CheckLogin('edit') && $this->CheckConfig($arCallFunction, $arCallArgs)) {
?>
<html>
<head>
<title>Saving Data</title>
<script>
  function addFormElement(name, value) {
    eValue=new String(value);
    eValue.replace('/"/','&quot;');
  	document.forms[0].insertAdjacentHTML('BeforeEnd','<input type="hidden" name="'+name+'" value="'+eValue+'">');
  }

  function dosave() {
	while (window.opener.isDirty()) {
		if (field = window.opener.getDirtyField()) {
			addFormElement('changes['+field.path+']'+field.name, field.value);
		}
	}
    document.forms[0].submit();
  }
</script>
</head>
<body bgcolor="#CCCCCC" onLoad="dosave();">
<font face='Arial,helvetica,sans-serif'>
<form method='POST' action='user.edit.save.all.phtml'>
</form>
<br>
Saving Data
</font>
</body>
</html>
<?php
	}
?>