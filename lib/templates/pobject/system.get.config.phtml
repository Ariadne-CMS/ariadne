<?php
	if (!$ARConfig->cache[$this->parent] && $this->parent!="..") {
		$this->get($this->parent, "system.get.config.phtml");
	}

	$this->call('system.get.config.data.phtml', $arCallArgs);
	/* load pinp configuration data via config.ini */
	$nolangcheck = $ARCurrent->nolangcheck;	
	$ARCurrent->nolangcheck = true;
	
	$ARConfig->pinpcache[$this->path] = $ARConfig->pinpcache[$this->parent];
	$ARCurrent->arConfig = &$ARConfig->pinpcache[$this->path];

	/* calling config.ini directly for each system.get.config.phtml call */
	if (!$this->CheckConfig('config.ini', $arCallArgs)) {
		$ARConfig->libraries[$this->path] = $ARCurrent->arConfig['library'];
	}
	// remove pinpcache reference
	unset($ARCurrent->arConfig);
	$ARCurrent->nolangcheck = $nolangcheck;

	/* now load the library configuration data into our normal cache */
	if ($ARConfig->pinpcache[$this->path]["library"]) {
		$ARConfig->cache[$this->path]->libraries = $ARConfig->pinpcache[$this->path]["library"];
	}
?>