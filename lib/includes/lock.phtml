<?php
	if (!$AR) global $AR;
	
	if ($lock_duration)
		$locktime=$lock_duration+time();

	if (!$lock_type) $lock_type="O";

	if (($result=$this->lock($locktime,$lock_type)) && ($result["locks"][$this->path]["identity"]!=($user=$AR->user->data->login))) {
		$arResult=false;
		$ARCurrent->locks[$this->path]=$result;
	} else {
		$arResult=true;
	}

?>
