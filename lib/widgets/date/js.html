<script type="text/javascript" language="javascript">
<!--

	var wgDateForm=null;

	function SelectDate(formobject, date, name, title, format, form) {
		if (form) {
			wgDateForm=form;
		}
		if (formobject.value) {
			date=formobject.value;
		}
		var datewindow=window.open(
			'<?php echo $AR->dir->www; ?>widgets/date/index.php?date='+escape(date)+
			'&title='+escape(title)+ 
			'&format='+escape(format)+ 
			'&name='+escape(name),
			'datewindow', 'directories=no,height=250,width=300,location=no,menubar=no,status=no,toolbar=no,resizable=yes');
		datewindow.opener=this;
		return false;
	}

	function SetDate(name, date, formatted) {
		wgDateForm[name].value=date;
		wgDateForm['formatted'+name].value=formatted;
		<?php
			if ( !( $wgDateDontRegister ?? null ) ) {
		?>
		if (top.registerChange) {
			if (!top.arFieldRegistry[wgDateForm[name].id]) {
				top.registerDataField(wgDateForm[name].id,name,'<?php echo $this->path; ?>',<?php echo $this->id; ?>);
			}
			top.arFieldRegistry[wgDateForm[name].id].value=date;
			top.registerChange(wgDateForm[name].id);
		}
		<?php
			}
		?>
	}

// -->
</script>
