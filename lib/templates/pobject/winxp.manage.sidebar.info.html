<?php
    /******************************************************************
     winxp.manage.sidebar.info.html                        Muze Ariadne
     ------------------------------------------------------------------
     Author: Muze (info@muze.nl)
     Date: 11 december 2002

     Copyright 2002 Muze

     This file is part of Ariadne.

     Ariadne is free software; you can redistribute it and/or modify
     it under the terms of the GNU General Public License as published 
     by the Free Software Foundation; either version 2 of the License, 
     or (at your option) any later version.
 
     Ariadne is distributed in the hope that it will be useful,
     but WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     GNU General Public License for more details.

     You should have received a copy of the GNU General Public License
     along with Ariadne; if not, write to the Free Software 
     Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  
     02111-1307  USA

    -------------------------------------------------------------------

     Description:

	Similar to the manage.details.html of the 'new' interface, but
	this template shows the details of an object in the sidebar.

    ******************************************************************/

  	include_once($this->store->get_config("code")."nls/winxp.".$this->reqnls);
	if ($this->CheckLogin("read") && $this->CheckConfig($arCallFunction, $arCallArgs)) {
		if (!$arLanguage) {
			$arLanguage=$nls;
			if (is_array($arCallArgs)) {
				$arCallArgs["arLanguage"]=$nls;
			} else {
				$arCallArgs.="&arLanguage=$nls";
			}
		}

		$arCallArgs["sectionName"] = "info";
		$arCallArgs["sectionDisplayName"] = 0;
		$arCallArgs["specialSection"] = false;
		$this->call("winxp.manage.sidebar.sectionstart.html", $arCallArgs);
?>
	<div class="details">
<?php
      $myName = $nlsdata->name;
      if (strlen($myName) > 25) {
                        $myName = "<span title=\"$sectionDisplayName\">".substr($myName, 0, 22)."..."."</span>";
      }
?>

	<strong><?php echo $myName ?></strong><br />
	<?php 
		$myType = $this->get("/system/ariadne/types/".$this->type, "system.get.name.phtml");
		echo $myType[0];
	?>
	<br />
			<table width="100%" border="0" cellpadding="0" cellspacing="0">
				<tr><td valign="top"><?php echo $ARnls["user"]; ?>:</td><td valign="top" class="data"><a href="javascript:arshow('edit_object_owner','edit.config.owner.phtml')" title="<?php echo $ARnls['change_owner']; ?>"><?php echo $this->data->owner_name; ?></a></td></tr>
				<tr><td valign="top"><?php echo $ARnls["date"]; ?>:</td><td valign="top" class="data"><?php echo strftime("%m-%d-%Y",$this->data->ctime); ?></td></tr>
				<tr><td valign="top"><?php echo $ARnls["modified"]; ?>:</td><td valign="top" class="data"><?php echo strftime("%m-%d-%Y",$this->data->mtime); ?></td></tr>
				<tr><td valign="top"><?php echo $ARnls["size"]; ?>:</td><td valign="top" class="data"><?php echo $this->size; ?></td></tr>
				<tr><td valign="top"><?php echo $ARnls["priority"]; ?>:</td><td valign="top" class="data"><?php echo $this->priority; ?></span></td></tr>
				<?php
					if (is_array($data->nls->list)) {
				?>
				<tr><td valign="top"><?php echo $ARnls["language"]; ?>:</td><td valign="middle" class="data"><?php 
						reset($data->nls->list);
						while (list($key, $nls)=each($data->nls->list)) {
							if ($arLanguage==$key) {
								$class="selected";
							} else {
								$class="unselected";
							}
							echo "<a class='$class' href='#' onClick=\"top.Set('arLanguage','$key'); parent.location=parent.location + '?".ldGetServerVar("QUERY_STRING")."&arLanguage=$key'; return true;\"><img src=\"".$AR->dir->images."nls/small/".$key.".gif\" border=\"0\" alt=\"".$AR->nls->list[$key]."\"></a> ";
						}
					?></td></tr>
				<?php
					}
				?>
			</table>
	</div>
<?php
	$this->call("winxp.manage.sidebar.sectionend.html", $arCallArgs);
	}
?>