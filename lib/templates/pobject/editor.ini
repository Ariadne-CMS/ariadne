<?php
	// List of predefined html editor options, MS DHTML editing component
	define(DECMD_BOLD ,                      5000);
	define(DECMD_COPY ,                      5002);
	define(DECMD_CUT ,                       5003);
	define(DECMD_DELETE ,                    5004);
	define(DECMD_DELETECELLS ,               5005);
	define(DECMD_DELETECOLS ,                5006);
	define(DECMD_DELETEROWS ,                5007);
	define(DECMD_FINDTEXT ,                  5008);
	define(DECMD_FONT ,                      5009);
	define(DECMD_GETBACKCOLOR ,              5010);
	define(DECMD_GETBLOCKFMT ,               5011);
	define(DECMD_GETBLOCKFMTNAMES ,          5012);
	define(DECMD_GETFONTNAME ,               5013);
	define(DECMD_GETFONTSIZE ,               5014);
	define(DECMD_GETFORECOLOR ,              5015);
	define(DECMD_HYPERLINK ,                 5016);
	define(DECMD_IMAGE ,                     5017);
	define(DECMD_INDENT ,                    5018);
	define(DECMD_INSERTCELL ,                5019);
	define(DECMD_INSERTCOL ,                 5020);
	define(DECMD_INSERTROW ,                 5021);
	define(DECMD_INSERTTABLE ,               5022);
	define(DECMD_ITALIC ,                    5023);
	define(DECMD_JUSTIFYCENTER ,             5024);
	define(DECMD_JUSTIFYLEFT ,               5025);
	define(DECMD_JUSTIFYRIGHT ,              5026);
	define(DECMD_LOCK_ELEMENT ,              5027);
	define(DECMD_MAKE_ABSOLUTE ,             5028);
	define(DECMD_MERGECELLS ,                5029);
	define(DECMD_ORDERLIST ,                 5030);
	define(DECMD_OUTDENT ,                   5031);
	define(DECMD_PASTE ,                     5032);
	define(DECMD_REDO ,                      5033);
	define(DECMD_REMOVEFORMAT ,              5034);
	define(DECMD_SELECTALL ,                 5035);
	define(DECMD_SEND_BACKWARD ,             5036);
	define(DECMD_BRING_FORWARD ,             5037);
	define(DECMD_SEND_BELOW_TEXT ,           5038);
	define(DECMD_BRING_ABOVE_TEXT ,          5039);
	define(DECMD_SEND_TO_BACK ,              5040);
	define(DECMD_BRING_TO_FRONT ,            5041);
	define(DECMD_SETBACKCOLOR ,              5042);
	define(DECMD_SETBLOCKFMT ,               5043);
	define(DECMD_SETFONTNAME ,               5044);
	define(DECMD_SETFONTSIZE ,               5045);
	define(DECMD_SETFORECOLOR ,              5046);
	define(DECMD_SPLITCELL ,                 5047);
	define(DECMD_UNDERLINE ,                 5048);
	define(DECMD_UNDO ,                      5049);
	define(DECMD_UNLINK ,                    5050);
	define(DECMD_UNORDERLIST ,               5051);
	define(DECMD_PROPERTIES ,                5052);
	// OLECMDEXECOPT  
	define(OLECMDEXECOPT_DODEFAULT ,         0); 
	define(OLECMDEXECOPT_PROMPTUSER ,        1);
	define(OLECMDEXECOPT_DONTPROMPTUSER ,    2);
	// DHTMLEDITCMDF
	define(DECMDF_NOTSUPPORTED ,             0); 
	define(DECMDF_DISABLED ,                 1); 
	define(DECMDF_ENABLED ,                  3);
	define(DECMDF_LATCHED ,                  7);
	define(DECMDF_NINCHED ,                  11);
	// DHTMLEDITAPPEARANCE
	define(DEAPPEARANCE_FLAT ,               0);
	define(DEAPPEARANCE_3D ,                 1); 
	// OLE_TRISTATE
	define(OLE_TRISTATE_UNCHECKED ,          0);
	define(OLE_TRISTATE_CHECKED ,            1);
	define(OLE_TRISTATE_GRAY ,               2);


	// predefined editor settings, which editor buttons disabled
	// and which tags are allowed:
	// strict editor settings, basic html
	$arEditorDefaults["_strict"]=array(
		DECMD_HYPERLINK => 1,
		DECMD_IMAGE => 1,
		DECMD_INDENT => 1,
		DECMD_INSERTCELL => 1,
		DECMD_INSERTCOL => 1,
		DECMD_INSERTROW => 1,
		DECMD_INSERTTABLE => 1,
		DECMD_JUSTIFYCENTER => 1,
		DECMD_JUSTIFYLEFT => 1,
		DECMD_JUSTIFYRIGHT => 1,
		DECMD_LOCK_ELEMENT => 1,
		DECMD_MAKE_ABSOLUTE => 1, 
		DECMD_MERGECELLS => 1, 
		DECMD_ORDERLIST => 1,
		DECMD_OUTDENT => 1,
		DECMD_SEND_BACKWARD => 1,
		DECMD_BRING_FORWARD => 1,
		DECMD_SEND_BELOW_TEXT => 1,
		DECMD_BRING_ABOVE_TEXT => 1,
		DECMD_SEND_TO_BACK => 1,
		DECMD_BRING_TO_FRONT => 1,
		DECMD_SETBACKCOLOR => 1,
		DECMD_SETBLOCKFMT => 1,
		DECMD_SETFONTNAME => 1,
		DECMD_SETFONTSIZE => 1,
		DECMD_SETFORECOLOR => 1,
		DECMD_SPLITCELL => 1,
		DECMD_UNLINK => 1,
		DECMD_UNORDERLIST => 1, // test
		"allow_tags" => "<strong><b><br><p><em><i><q><s><strike><tt><u>"
	);

	// strict_img editor settings, basic html + images + links
	$arEditorDefaults["_strict_img"]=array(
		DECMD_INDENT => 1,
		DECMD_INSERTCELL => 1,
		DECMD_INSERTCOL => 1,
		DECMD_INSERTROW => 1,
		DECMD_INSERTTABLE => 1,
		DECMD_JUSTIFYCENTER => 1,
		DECMD_JUSTIFYLEFT => 1,
		DECMD_JUSTIFYRIGHT => 1,
		DECMD_LOCK_ELEMENT => 1,
		DECMD_MAKE_ABSOLUTE => 1, 
		DECMD_MERGECELLS => 1, 
		DECMD_ORDERLIST => 1,
		DECMD_OUTDENT => 1,
		DECMD_SEND_BACKWARD => 1,
		DECMD_BRING_FORWARD => 1,
		DECMD_SEND_BELOW_TEXT => 1,
		DECMD_BRING_ABOVE_TEXT => 1,
		DECMD_SEND_TO_BACK => 1,
		DECMD_BRING_TO_FRONT => 1,
		DECMD_SETBACKCOLOR => 1,
		DECMD_SETBLOCKFMT => 1,
		DECMD_SETFONTNAME => 1,
		DECMD_SETFONTSIZE => 1,
		DECMD_SETFORECOLOR => 1,
		DECMD_SPLITCELL => 1,
		DECMD_UNLINK => 1,
		DECMD_UNORDERLIST => 1, // test
		"allow_tags" => "<strong><b><br><p><em><i><q><s><strike><tt><u><a><img>"
	);

	// loose editor settings, no tables and no dhtml
	$arEditorDefaults["_loose"]= array(
		DECMD_INSERTCELL => 1,
		DECMD_INSERTCOL => 1,
		DECMD_INSERTROW => 1,
		DECMD_INSERTTABLE => 1,
		DECMD_LOCK_ELEMENT => 1,
		DECMD_MAKE_ABSOLUTE => 1, 
		DECMD_MERGECELLS => 1, 
		DECMD_SEND_BACKWARD => 1,
		DECMD_BRING_FORWARD => 1,
		DECMD_SEND_BELOW_TEXT => 1,
		DECMD_BRING_ABOVE_TEXT => 1,
		DECMD_SEND_TO_BACK => 1,
		DECMD_BRING_TO_FRONT => 1,
		DECMD_SETBACKCOLOR => 1,
		DECMD_SETFONTNAME => 1,
		DECMD_SETFONTSIZE => 1,
		DECMD_SETFORECOLOR => 1,
		DECMD_SPLITCELL => 1,
		"allow_tags" => $arEditorDefaults["_strict_img"]["allow_tags"]."<abbr><acronym><address><area><big><small><blockquote><cite><code><comment><dd><dl><dt><hr><li><ol><ul><map><samp><sub><sup><var>"
	);

	// full editor settings, anything goes
	$arEditorDefaults["_full"] = array(
		"allow_tags" => ""	// allow all tags
	);


	// ---------------------------------------------
    // Start of the HTML editor widget configuration
	// ---------------------------------------------

	$arEditorSettings = array(		// set up defaults:
		hyperlink => array (		// hyperlink types en templates

			external 		=> 'edit.object.html.link.external.html',
			'to anchor'		=> 'edit.object.html.link.anchor.html',
			internal 		=> 'edit.object.html.link.internal.html',
			indirect 		=> 'edit.object.html.link.indirect.html'

		),

		affiliate => array(			// affiliate sites

			muze 			=> 'http://www.muze.nl/',
			ariadne 		=> 'http://ariadne.muze.nl/'

		),

		// affiliate prefix (template to use)
		affiliate_prefix 	=> 'show.indirect.html?url=',

		link => array(				// new hyperlink stuff
			behaviours => array(
				'current'	=> array(
					'name'			=> $ARnls['ariadne:editor:currentwindow'],
					'attributes'	=> array()
				),
				'new'		=> array(
					'name'			=> $ARnls['ariadne:editor:newwindow'],
					'attributes'	=> array(
						'target'		=> '_blank'
					)
				),
				'popup'		=> array(
					'name'			=> $ARnls['ariadne:editor:popup'],
					'attributes'	=> array(
						'target'		=> '_blank',
						'onClick'		=> "window.open(this.href, '_popup', 'directories=no,height=600,width=800,location=no,menubar=no,resizable=yes,status=no,toolbar=no'); return false;"
					)
				)
			),

			'types' => array(
				'internal'	=> array(
					'name'		=> $ARnls['ariadne:editor:internal_link'],
					'options'	=> array(
						'path'		=> true,
						'anchor'	=> true,
						'language'	=> $AR->nls->list,
						'behaviour'	=> array('current','new','popup')
					),
					attributes	=> array(
					)
				),
				'external'	=> array(
					'name'		=> $ARnls['ariadne:editor:external_link'],
					'options'	=> array(
						'url'		=> true,
						'anchor'	=> true,
						'behaviour'	=> array('current','new','popup')
					),
					attributes	=> array(
					)
				),
				'anchor'	=> array(
					'name'		=> $ARnls['ariadne:editor:anchor'],
					'options'	=> array(
						'name'		=> true
					),
					attributes	=> array(
					)
				)
			)
		),


		affiliate => array(			// affiliate sites

			muze 			=> 'http://www.muze.nl/',
			ariadne 		=> 'http://ariadne.muze.nl/'

		),

		// affiliate prefix (template to use)
		affiliate_prefix 	=> 'show.indirect.html?url=',

		photobook => array (		// default image directory

			location		=> ''

		),

		htmltidy => array(			// htmltidy settings

			enabled			=> false,
			options			=> $AR->Tidy->options.' --wrap 0 --output-xhtml no --drop-empty-paras yes --input-encoding utf8'

		),

		htmlcleaner => array(

			/* enable htmlcleaner, set it to false to disable it */

			enabled		=> true,

			/* the rewrite array contains the rewrite rules. 

			The first level index is used to match tags (like <b> <font> etc)
				If the index matches the given tag and its value is
				set to false then the tag will be removed from the document,
				if it is assigned a string, then the tag name will be replaced
				with that string. If it is an array then it will continue 
				with attribute matching. 

			The second level index is used to match attributes (like
				class, style etc).

				If the index matches the given attribue and its value is
				set to false then the attribute will be removed from the tag,
				if it is assigned a string, then the attribue name will be replaced
				with that string. If it is an array then it will continue 
				with attribute value matching. 

			The third level index is used to match attribute values.

				If the index matches the given attribue value and its value is
				set to false then the attribute will be removed from the tag,
				if it is assigned a string, then the attribue value will be replaced
				with that string. 

			*/

			rewrite		=> array(
				'o:.*' => false,
				'font' => false,
				'img' => array(
					'class' => array( 'mso.*' => false ),
					'v:.*' => false
				),
				'.*' => array( 
					'class' => array( 'mso.*' => false ),
					'style' => false,
					'v:.*' => false,
					'jquery[0-9]+' => false
				)
			), 

			/*
				tags to delete when emptied by the rewrite rules
			*/
			delete_emptied => array(
				'span', 'div', 'o', 'font'
			),

			/*
				delete empty container tags (eg: <a href="http://clean.me"></a>)
			*/
			delete_empty_containers => array(
				'a'
			)
		),

		// select editor settings: strict, strict_img, loose or full
		tags				=> '_full',

		// select editor settings for summaries: strict, strict_img, loose or full
		tags_summary		=> '_strict_img',

		// dtd to use, currently unused
		doctype				=> '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',

		// start document
    	emptydoc			=> "<html>\n<head>\n  <meta content=\"text/html; charset=UTF-8\" http-equiv=\"Content-Type\">\n  <title></title>\n</head>\n<body>\n<p>&nbsp;</p>\n</body>\n</html>\n",

		// use xhtml? (also set xhtml in htmltidy config)
		xhtml				=> false,

		css => array(

			// default stylesheet
			stylesheet		=> ($this->arIsNewObject) ? $this->make_url($this->parent)."style.css" : $this->make_url("", $nls)."style.css",

			// inline styles
			inline => array(
				"" 			=>  "Inline Style",
				"0"			=>  "Clear",
				"big"		=>	"Bigger",
				"cite"		=>	"Citation",
				"code"		=>	"Code",
				"dfn"		=>	"Definition",
				"del"		=>	"Deleted text",
				"ins"		=>	"Inserted text",
				"kbd"		=>	"Keyboard",
				"listing"	=>	"Listing",
				"q"			=>	"Quote",
				"small"		=>	"Smaller",
				"samp"		=>	"Sample output",
				"tt"		=>	"Teletype",
				"var"		=>	"Variable"
			),
			// block format styles
			block => array(
				""			=>  "Block Style",
				"p" 		=>	"Normal",
				"pre" 		=>	"Formatted",
				"h1" 		=>	"Heading 1",
				"h2"		=>	"Heading 2",
				"h3"		=>	"Heading 3",
				"h4"		=>	"Heading 4",
				"h5"		=>	"Heading 5",
				"h6"		=>	"Heading 6",
				"address" 	=>  "Address"
			)

		),

		image => array(

			// image browse dialog options
			browse	=> array(
	
				top				=> '/',
				hideButtons		=> array(

					lookin		=> false,
					up			=> false,
					home		=> true,
					'new'		=> false,
					viewmode	=> true
				),
				hideMenu		=> false,
				hideCurrent		=> false,
				hidePhotobook	=> false,
				hideHome		=> false,
				hideURL			=> false
			),

			// image styles
			styles	=> array(
	
				'default'		=> 
							array (
								'template' => '',
								'class' => 'default'
							),
				'thumbnail'		=>
							array(
								'template' => 'view.thumb.html',
								'class' => 'thumbnail'
							)
			)

		),

		toolbars => array(

			//toolbar states: 0=disable, 1=hide, 2=display
			StandardToolbar				=>	2,
			FormatToolbar				=>	2,
			FontFormatToolbar			=>	1,
			AbsolutePositioningToolbar	=>	1,
			TableToolbar				=>	1

		)
	);

	// ----------------------------------------
	// END OF CONFIG
	// ----------------------------------------

	$ARCurrent->arEditorSettings=$arEditorSettings;
	$ARCurrent->arEditorDefaults=$arEditorDefaults;


	$allnls = $ARCurrent->allnls;
	$ARCurrent->allnls = true;
	// allow user defined overrides and extensions
	if ($this->CheckLogin("read") && $this->CheckConfig($arCallFunction, $arCallArgs)) {

	}
	$ARCurrent->allnls = $allnls;

	$ARCurrent->arEditorSettings["disabled"]="";
	while (list($key, $value)=each($ARCurrent->arEditorDefaults[$ARCurrent->arEditorSettings["tags"]])) {
		if (is_numeric($key) && $value) {
			$ARCurrent->arEditorSettings["disabled"].=":".$key;
		}
	}
	$buttons="";
	if (is_array($ARCurrent->arEditorSettings["browse"]["hideButtons"])) {
		reset($ARCurrent->arEditorSettings["browse"]["hideButtons"]);
		while (list($key, $value)=each($ARCurrent->arEditorSettings["browse"]["hideButtons"])) {
			$buttons.="&buttons[".$key."]=".$value;
		}
	}
	$ARCurrent->arEditorSettings["browse"]["buttons"]=$buttons;
	$ARCurrent->arEditorSettings["disabled"].=":";
	$ARCurrent->arEditorSettings["allow_tags"]=$ARCurrent->arEditorDefaults[$ARCurrent->arEditorSettings["tags"]]["allow_tags"];
	$ARCurrent->arEditorSettings["allow_tags_summary"]=$ARCurrent->arEditorDefaults[$ARCurrent->arEditorSettings["tags_summary"]]["allow_tags"];

	$arResult=$ARCurrent->arEditorSettings;
?>
