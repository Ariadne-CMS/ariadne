<script language="javascript">
<!--
wgBrowseResult=0;

function Browse(resultobject, path, name, title, mode, filter, filename) {
  wgBrowseResult=resultobject;
  if (wgBrowseResult.value) {
    path=wgBrowseResult.value;
  }
  if (!filter || filter=="undefined") {
    filter='';
  }
  if (top.Get) {
    dprops=top.Get('browsewindow');
  } else if (top.window.opener && top.window.opener.top.Get) {
    dprops=top.window.opener.top.Get('browsewindow');
  } else {
    dprops='';
  }
  startpath='<?php
       if ($this->exists($this->path)) { // sometimes, even i do not exist
         $path=$this->path;
       } else {
         $path=$this->parent;
       }	
       echo $this->store->root.$path; 
     ?>';
  if (document.all) {
    var args=new Array();
    args['path']=path;
    args['title']=title;
    args['name']=name;
    args['mode']=mode;
    args['filter']=filter;
    args['filename']=filename;
    arr = showModalDialog( startpath+"browse.dialog.phtml", args,  "font-family:Verdana; font-size:12; dialogWidth:40em; dialogHeight:30em");
    if (arr!=null) {
      wgBrowseResult.value=arr['path'];
    }
  } else {
    browsewindow=window.open(
      '<?php
         if ($this->exists($this->path)) { // sometimes, even i do not exist
           $path=$this->path;
         } else {
           $path=$this->parent;
         }	
         echo $this->store->root.$path; 
       ?>browse.phtml?path='+escape(path)+'&title='+escape(title)+
         '&name='+escape(name)+'&mode='+escape(mode)+'&filter='+escape(filter)+
         '&filename='+escape(filename), 'browsewindow',
         'directories=no,height=300,width=500,location=no,menubar=no,status=no,toolbar=no,resizable=yes,'+dprops);
    browsewindow.opener=this;
    browsewindow.focus();
  }
}

// -->
</script>