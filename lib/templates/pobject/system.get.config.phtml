<?php
	if (!$ARConfig->cache[$this->parent] && $this->parent!="..") {
		$this->get($this->parent, "system.get.config.phtml");
	}

	$this->call('system.get.config.data.phtml', $arCallArgs);
	/* load pinp configuration data via config.ini */
	$allnls = $ARCurrent->allnls;
	$ARCurrent->allnls = true;
	
	$ARConfig->pinpcache[$this->path] = $ARConfig->pinpcache[$this->parent];
	$ARCurrent->arConfig = &$ARConfig->pinpcache[$this->path];

	/* calling config.ini directly for each system.get.config.phtml call */
	$loginSilent = $ARCurrent->arLoginSilent;
	if (!$this->CheckConfig('config.ini', $arCallArgs)) {
		if (is_array($ARCurrent->arConfig['library'])) {
			if (!$ARConfig->libraries[$this->path]) {
				$ARConfig->libraries[$this->path] = Array();
			}
			foreach ($ARCurrent->arConfig['library'] as $libName => $libPath) {
				$this->loadLibrary($libName, $libPath);
			}
		}
	}
	$ARCurrent->arLoginSilent = $loginSilent;

	// remove pinpcache reference
	unset($ARCurrent->arConfig);
	$ARCurrent->allnls = $allnls;

?>