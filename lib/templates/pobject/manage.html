<?php
    /******************************************************************
     manage.html                                           Muze Ariadne
     ------------------------------------------------------------------
     Author: Muze (info@muze.nl)
     Date: 11 december 2002

     Copyright 2002 Muze

     This file is part of Ariadne.

     Ariadne is free software; you can redistribute it and/or modify
     it under the terms of the GNU General Public License as published 
     by the Free Software Foundation; either version 2 of the License, 
     or (at your option) any later version.
 
     Ariadne is distributed in the hope that it will be useful,
     but WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     GNU General Public License for more details.

     You should have received a copy of the GNU General Public License
     along with Ariadne; if not, write to the Free Software 
     Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  
     02111-1307  USA

    -------------------------------------------------------------------

     Description:

	Standard 'new' management interface template.

    ******************************************************************/

	if ($this->CheckLogin("read") && $this->CheckConfig($arCallFunction, $arCallArgs)) {
		if (!$arLanguage) {
			$arLanguage=$nls;
			if (is_array($arCallArgs)) {
				$arCallArgs["arLanguage"]=$nls;
			} else {
				$arCallArgs.="&arLanguage=$nls";
			}
		}
?>
<html>
<head>
<title>Ariadne - <?php echo $nlsdata->name; ?></title>
<link href="<?php echo $AR->dir->styles; ?>manage.css" rel="StyleSheet" type="text/css">
</head>
<body>
	<table width="100%" height="95%">
	<tr><td valign="top" width="100%">
	<div id="topdiv">
		<?php $this->call("manage.top.html", $arCallArgs); ?>
	</div>
	</td><td rowspan="2" valign="top">
	<div id="sidebar">
		<?php $this->call("manage.info.html", $arCallArgs); ?>
		<br clear="all">
		<?php 
			$this->call("manage.details.html", $arCallArgs); 
		?>
	</div>
	</td></tr><tr><td valign="top" height="60%">
	<div id="container">
	<script>
		var myCookie=document.cookie;

		function Get(name) {
			var index = myCookie.indexOf(name + "=");
			if (index == -1) return null;
			index = myCookie.indexOf("=", index) + 1; // first character
			var endstr = myCookie.indexOf(";", index);
			if (endstr == -1) endstr = myCookie.length; // last character
			return unescape(myCookie.substring(index, endstr));
		}

		function Set(name, value) {
			var today=new Date();
			var expires=new Date(today.getTime() + 2678400000); // 31 days
			document.cookie=name+'='+value+'; expires='+expires.toGMTString();
		}

	</script>
	<script src="<?php echo $AR->dir->www; ?>widgets/browse/toolbar.js"></script>
	<?php $this->call("browse.toolbar.phtml"); ?>
	<script>


		function View(link, template) { 
			viewwindow=window.open('<?php echo $this->store->get_config("root"); ?>'+link, 'viewwindow');
		}

		if (document.all) {
			window.innerHeight=document.body.clientHeight;
			window.innerWidth=document.body.clientWidth;
		}

		var height=window.innerHeight-254;
		var query='<?php echo ldGetServerVar("QUERY_STRING"); ?>';
		viewmode=top.Get('viewmode');
		if (!viewmode) {
			viewmode='list';
		}
		<?php
			$oldnls=$nls;
			$this->setnls($arLanguage);
			$url=$this->store->get_config("root").$this->make_path();
		?>
		var path='<?php echo $url; ?>';
		document.write('<iframe id="archildren" height="'+height+'" width="100%" src="'+path+'browse.nav.'+viewmode+'.phtml?'+query+'&limit='+b_limit+'"></iframe>');
		<?php
			$this->setnls($oldnls);
		?>


	</script>
	</div>
	<script>
		if (!window.container) {
			container=document.getElementById('container');
			topdiv=document.getElementById('topdiv');
			width=topdiv.offsetWidth-10;
			height=container.offsetHeight-40;
			container.style.position='absolute';
			container.style.width=width;
			container.style.height=height;
			container.style.top=220;
		}
	</script>
	</td></tr></table>
</body>
</html>

<?php
	}
?>