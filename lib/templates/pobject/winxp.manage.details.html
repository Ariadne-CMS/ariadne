<?php
  	include_once($this->store->get_config("code")."nls/winxp.".$this->reqnls);
	if ($this->CheckLogin("read") && $this->CheckConfig($arCallFunction, $arCallArgs)) {
		if (!$arLanguage) {
			$arLanguage=$nls;
			if (is_array($arCallArgs)) {
				$arCallArgs["arLanguage"]=$nls;
			} else {
				$arCallArgs.="&arLanguage=$nls";
			}
		}

		$arCallArgs["sectionName"] = "details";
		$arCallArgs["sectionDisplayName"] = $ARnls["xp_detailsH"];
		$arCallArgs["specialSection"] = false;
		ob_start(); // start outputbuffer so we can throw away this section
					// if it is empty	
		$skipsection=true;	
		$this->call("winxp.manage.sidebar.sectionstart.html", $arCallArgs);
?>
	<div class="details">
		<base target="_parent" />
		<?php 
			$oldPHP_SELF = $_SERVER['PHP_SELF'];
			$_SERVER['PHP_SELF'] = $_SERVER['HTTP_REFERER'];
			ob_start();
			$this->Call("manage.details.html"); 
			if ($contents=ob_get_contents()) {
				$skipsection=false;
			}
			ob_end_flush();
			$_SERVER['PHP_SELF'] = $oldPHP_SELF;
			?><br />
		<base target="_self" />
	</div>
<?php
		$this->call("winxp.manage.sidebar.sectionend.html", $arCallArgs);
		if ($skipsection) {
			ob_end_clean();
		} else {
			ob_end_flush();
		}
	}
?>