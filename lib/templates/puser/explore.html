<?php
  if ($this->CheckLogin("read")) {
    if ($data->language) {
      $nls=$data->language;
	  ldSetNls($nls);
    }
?>
<HTML>
<HEAD>
<TITLE>Ariadne</TITLE>
<script>
<!--

var cacheTemplate;


document.registry=new Array();

function Set(name, value) {
  document.registry[name]=new String(value);
}

function Get(name) {
window.alert('get');
  if (document.registry[name]) {
    result=document.registry[name];
  } else {
    result=0;
  }
  return result;
}

function View(link, template) {
  if (link=="..") {
    link="/";
  }

//  alert('Viewing ('+link+')');

  if (template) {
    target='?template='+escape(template);
    window.cacheTemplate=escape(template);
  } else {
    if (window.cacheTemplate) {
      target="?template="+window.cacheTemplate;
    } else {
      target='?template=classic.manage.html'; // set default template
    }
  }
<?php if ($data->interface!="new") { ?>
  window.view.location.href='<?php echo $AR->dir->www; ?>view.php/<?php echo "-".$ARCurrent->session->id."-/$nls"; ?>'+link+target;
<?php } else { ?>
  template='view.phtml';
  window.tree.treeload.location.href='<?php echo $AR->dir->www; ?>loader.php/<?php echo "-".$ARCurrent->session->id."-/$nls"; ?>/manage.goto.phtml?link='+escape(link)+'&template='+escape(template);
<?php } ?>
}

function Loading() {
  window.tree.treeload.location.href='<?php echo $AR->dir->www; ?>loading.html';
}

function LoadingDone() {
  window.tree.treeload.location.href='<?php echo $AR->dir->www; ?>loadingdone.html';
}

function init() {
  loader=window.tree.treeload;
  treeview=window.tree.treeview;
}

loader=0;

  function toggletree() {
    if (document.treestatus=='hidden') {
      silent_showtree();
    } else {
      silent_hidetree();
    }
    return document.treestatus;
  }

  function silent_hidetree() {
    if (document.all) {
      document.body.cols="0,*";
      document.treestatus=new String('hidden');
    }
  }

  function silent_showtree() {
    if (document.all) {
      document.body.cols="200,*";
      document.treestatus=new String('visible');
    }
  }

  function hidetree() {
    silent_hidetree();
    if (document.all && (icon=window.view.document.all['explorerbar_icon'])) {
      icon.className='unselectedOption';
    }
  }

  function gettreestatus() {
    return document.treestatus;
  }

  document.treestatus=new String('visible');
//--></script>
<style>
  FRAME, FRAMESET {
    BORDER: 0;
  }
</style>
</HEAD>
<FRAMESET COLS="200,*" onLoad="init();">
  <FRAME NAME="tree" 
    SRC="<?php echo $AR->dir->www; ?>widgets/tree/root.php?loader=<?php echo $this->store->root; ?>&path=<?php 
    echo RawUrlEncode($AR->user->path); ?>" marginwidth="0" marginheight="0" >
  <FRAME NAME="view" SRC="<?php echo $this->store->root; ?>/system/ariadne/news/" marginwidth="0" marginheight="0">
</FRAMESET>
</HTML>
<?php
  }
?>